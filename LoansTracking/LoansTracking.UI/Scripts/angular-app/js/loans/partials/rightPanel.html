<div ng-show="addMode || editMode" class="col-xs-12 col-sm-4 col-md-4 col-lg-4 loansModeContent rightPanel" data-ng-controller="rightPanelController">
    <span ng-show="addMode" class="modeTitle">Add New Loan</span>
    <span ng-show="editMode" class="modeTitle">Edit/Delete Loan</span>
    <form novalidate role="form" name="form">
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" class="form-control" id="name" name="name" placeholder="Enter a name" required ng-minlength="3" ng-model="loan.personLoanedToName">
            <span ng-show="form.name.$touched && form.name.$error.required" class="text-danger">Name is required!</span>
            <span ng-show="form.name.$touched && form.name.$invalid" class="text-danger">Name must be at least three characters!</span>
        </div>
        <div class="form-group">
            <label for="surname">Surname:</label>
            <input type="text" class="form-control" id="surname" name="surname" placeholder="Enter a surname" required ng-minlength="2" ng-model="loan.personLoanedToSurname">
            <span ng-show="form.surname.$touched && form.surname.$error.required" class="text-danger">Surname is required!</span>
            <span ng-show="form.surname.$touched && form.surname.$invalid" class="text-danger">Surname must be at least two characters!</span>
        </div>
        <div class="form-inline">
            <div class="form-group">
                <label for="surname" style="float: left">Amount:</label><br/>
                <input type="number" class="form-control" placeholder="Enter an amount" style="max-width: 150px;" name="amount" required ng-model="loan.amount">
            </div>
            <div class="form-group">
                <label for="surname">Due date:</label><br/>
                <input type="text" name="date1" class="form-control" uib-datepicker-popup="{{format}}" ng-model="loan.dueDate" value={{loan.dueDate}} is-open="datepicker1.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" style="max-width: 164px;"/>
             </div>
            <div class="form-group">
                <span>
                    <button type="button" class="btn btn-default btn-raised" ng-click="openDatepicker1()" style="margin-top: 6px"><i class="glyphicon glyphicon-calendar"></i></button>
                </span>
            </div>
            <p ng-show="paymentForm.amount.$touched && paymentForm.amount.$error.required" class="text-danger">Amount is required!</p>
            <p ng-show="paymentForm.date1.$touched && paymentForm.date1.$error.required" class="text-danger">Payment date is required!</p>
        </div>
        
        <div class="form-group" data-ng-show="editMode">
            <a ng-click="showPayment=!showPayment" href="">Add new payment</a>
            <a href="" style="float: right;" ng-click="openAllPaymentsModal(loan)">All payments</a>
        </div>
        <ng-form ng-show="showPayment" novalidate role="form" name="paymentForm">
            <div class="form-group">
                <label for="amount">Amount:</label>
                <!-- validation is not implemented for this field -->
                <input type="number" class="form-control" id="amount" placeholder="Enter an amount" name="amount2" ng-model="payment.amountPaid" required>
                <p ng-show="paymentForm.amount2.$touched && paymentForm.amount2.$error.required" class="text-danger">Amount is required!</p>
            </div>
            <label for="dueDate">payment date:</label>
            <div class="form-inline">
                <div class="form-group">
                    <input type="text" id="dueDate" name="dueDate" class="form-control" uib-datepicker-popup="{{format}}" ng-model="payment.date" is-open="datepicker2.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" />
                </div>
                <div class="form-group margin-top-5">
                    <span>
                        <button type="button" class="btn btn-default btn-raised" ng-click="openDatepicker2()"><i class="glyphicon glyphicon-calendar"></i></button>
                    </span>
                    <span>
                        <button type="button" class="btn btn-primary btn-raised" ng-show="showPayment" ng-click="addPayment(payment)">Add</button>
                    </span>
                </div>
            </div>
            <p ng-show="paymentForm.dueDate.$touched && paymentForm.dueDate.$error.required" class="text-danger">Due Date is required!</p>
        </ng-form>
        <div class="form-group" data-ng-show="editMode">
            <p style="margin: 30px 0 30px 0">'Status <span class="badge red">{{loan.status}} KM</span>'</p>
        </div>

        <div class="form-group">
            <button type="button" class="btn btn-default btn-raised " ng-click="addMode = false;editMode = false">Cancel</button>
            <button type="button" class="btn btn-primary btn-raised"  ng-show="addMode" ng-click="addLoan(loan)">Save</button>
            <button type="button" class="btn btn-primary btn-raised" ng-show="editMode" ng-click="editLoan(loan)">Edit</button>
            <button type="button" class="btn btn-danger btn-raised" style="float: right" ng-show="editMode" ng-click="deleteLoan(loan.id)">Delete</button>
        </div>
    </form>
</div>